{# @var gateway brightlabs\securepay\gateways\Gateway #}

{% import "_includes/forms" as forms %}
{% if not gateway.isCredentialValid %}
<div class="securepay-error-message">
    <div class="error-icon">⚠️</div>
    <h3>SecurePay Gateway Configuration Error</h3>
    <p>Your SecurePay gateway is not properly configured. Please check the following:</p>
    <ul>
        <li>Verify your Merchant Code is correct</li>
        <li>Ensure your Client ID is valid</li>
        <li>Confirm your Client Secret is properly set</li>
        <li>Check that you're using the correct environment (Sandbox/Live)</li>
    </ul>
    <p><strong>Note:</strong> If you're testing, make sure to enable Sandbox Mode. For production, ensure you have valid live credentials configured and disable Sandbox Mode.</p>
</div>
{% do view.registerCss("
.securepay-error-message{
        border:1px solid red;
        border-radius: 4px;
        padding: 20px;
        margin: 20px 0;
        background-color: #fff5f5;
        color: #c53030;
    }
    .securepay-error-message .error-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }
    .securepay-error-message h3 {
        margin: 0 0 10px 0;
        color: #c53030;
        font-size: 1.2rem;
    }
    .securepay-error-message p {
        margin: 5px 0;
        line-height: 1.5;
    }
    .securepay-error-message strong {
        font-weight: 600;
    }
}
") %}
{% endif %}
<div class="field">
    <div class="heading">
        <h2>{{ 'API Credentials'|t('commerce') }}</h2>
    </div>
    <div class="instructions">
        <p>{{ 'Enter your SecurePay API credentials. You can obtain these from your SecurePay merchant portal.'|t('commerce') }}</p>
    </div>
</div>
{{ forms.textField({
    label: 'Merchant Code'|t('commerce'),
    id: 'merchantCode',
    name: 'merchantCode',
    value: gateway.merchantCode,
    required: true,
    instructions: 'The merchant code provided by SecurePay.'|t('commerce'),
}) }}

{{ forms.textField({
    label: 'Client ID'|t('commerce'),
    id: 'clientId',
    name: 'clientId',
    value: gateway.clientId,
    required: true,
    instructions: 'The client ID provided by SecurePay for API authentication.'|t('commerce'),
}) }}

{{ forms.passwordField({
    label: 'Client Secret'|t('commerce'),
    id: 'clientSecret',
    name: 'clientSecret',
    value: gateway.clientSecret,
    required: true,
    instructions: 'The client secret provided by SecurePay for API authentication.'|t('commerce'),
}) }}



<hr>

<div class="field">
    <div class="heading">
        <h2>{{ 'Environment Settings'|t('commerce') }}</h2>
    </div>
</div>

{{ forms.lightswitchField({
    label: 'Sandbox Mode'|t('commerce'),
    id: 'sandboxMode',
    name: 'sandboxMode',
    on: gateway.sandboxMode,
    instructions: 'Whether to use the SecurePay sandbox environment for testing.'|t('commerce'),
}) }}




<div id="js-sdk-styling">
    <hr>
    
    <div class="field">
        <div class="heading">
            <h2>{{ 'JavaScript SDK Styling'|t('commerce') }}</h2>
        </div>
        <div class="instructions">
            <p>{{ 'Customize the appearance of the payment form when using the JavaScript SDK.'|t('commerce') }}</p>
        </div>
    </div>
    {{ forms.checkboxSelectField({
        label: 'Allowed Card Types'|t('commerce'),
        id: 'allowedCardTypes',
        name: 'allowedCardTypes',
        values: gateway.allowedCardTypes,
        options: [
            { label: 'Visa', value: 'visa' },
            { label: 'Mastercard', value: 'mastercard' },
            { label: 'American Express', value: 'amex' },
            { label: 'Diners Club', value: 'diners' }
        ],
        instructions: 'Select which card types are allowed for payment processing.'|t('commerce'),
    }) }}

    {{ forms.lightswitchField({
        label: 'Show Card Icons'|t('commerce'),
        id: 'showCardIcons',
        name: 'showCardIcons',
        on: gateway.showCardIcons,
        instructions: 'Display card brand icons in the payment form to help users identify supported cards.'|t('commerce'),
    }) }}
    
    {{ forms.colorField({
        label: 'Background Colour'|t('commerce'),
        id: 'backgroundColour',
        name: 'backgroundColour',
        value: gateway.backgroundColour,
        instructions: 'The background colour of the payment form fields.'|t('commerce'),
    }) }}


    {{ forms.textField({
        label: 'Label Font Family'|t('commerce'),
        id: 'labelFontFamily',
        name: 'labelFontFamily',
        value: gateway.labelFontFamily,
        placeholder: 'Arial, Helvetica, sans-serif',
        instructions: 'The font family for form field labels.'|t('commerce'),
        inputAttributes: {
            style: 'width: 300px;',
        },
    }) }}

    {{ forms.textField({
        label: 'Label Font Size'|t('commerce'),
        id: 'labelFontSize',
        name: 'labelFontSize',
        value: gateway.labelFontSize,
        placeholder: '1.1rem',
        instructions: 'The font size for form field labels (e.g., 1.1rem, 16px, 14pt).'|t('commerce'),
        inputAttributes: {
            style: 'width: 300px;',
        },
    }) }}

    {{ forms.colorField({
        label: 'Label Font Colour'|t('commerce'),
        id: 'labelFontColour',
        name: 'labelFontColour',
        value: gateway.labelFontColour,
        instructions: 'Tthe colour of form field labels.'|t('commerce'),
        inputAttributes: {
            style: 'width: 300px;',
        },
    }) }}

    {{ forms.textField({
    label: 'Input Font Family'|t('commerce'),
    id: 'inputFontFamily',
    name: 'inputFontFamily',
    value: gateway.inputFontFamily,
    placeholder: 'Arial, Helvetica, sans-serif',
    instructions: 'The font family for form input fields.'|t('commerce'),
    inputAttributes: {
        style: 'width: 300px;',
    },
}) }}

    {{ forms.textField({
        label: 'Input Font Size'|t('commerce'),
        id: 'inputFontSize',
        name: 'inputFontSize',
        value: gateway.inputFontSize,
        placeholder: '1.1rem',
        instructions: 'The font size for form input fields (e.g., 1.1rem, 16px, 14pt).'|t('commerce'),
        inputAttributes: {
        style: 'width: 300px;',
    },
    }) }}

    {{ forms.colorField({
        label: 'Input Font Colour'|t('commerce'),
        id: 'inputFontColour',
        name: 'inputFontColour',
        value: gateway.inputFontColour,
        instructions: 'Tthe colour of text in form input fields.'|t('commerce'),
        inputAttributes: {
            style: 'width: 300px;',
        },
    }) }}

    
</div>

<hr>

<div class="field">
    <div class="heading">
        <h2>{{ 'Security Features'|t('commerce') }}</h2>
    </div>
    <div class="instructions">
        <p>{{ 'Configure additional security features provided by SecurePay.'|t('commerce') }}</p>
    </div>
</div>

{{ forms.lightswitchField({
    label: '3D Secure 2.0'|t('commerce'),
    id: 'threeDSecure',
    name: 'threeDSecure',
    on: gateway.threeDSecure,
    instructions: 'Enable 3D Secure 2.0 authentication for enhanced security. Requires 3DS to be enabled on your SecurePay account.'|t('commerce'),
}) }}

<hr>


<div class="field">
    <div class="heading">
        <h2>{{ 'Payment Features'|t('commerce') }}</h2>
    </div>
    <div class="instructions">
        <p>{{ 'Enable additional payment features offered by SecurePay.'|t('commerce') }}</p>
    </div>
</div>

{{ forms.lightswitchField({
    label: 'Card Payments'|t('commerce'),
    id: 'cardPayments',
    name: 'cardPayments',
    on: gateway.cardPayments,
    instructions: 'Enable credit and debit card payments. This is the standard payment method for most transactions.'|t('commerce'),
}) }}

<hr>

<div class="field">
    <div class="heading">
        <h2>{{ 'Integration Information'|t('commerce') }}</h2>
    </div>
    <div class="instructions">
        <p>{{ 'This gateway integrates with SecurePay API v2 following the official documentation patterns.'|t('commerce') }}</p>
        <ul>
            <li>{{ 'API Documentation: '|t('commerce') }}<a href="https://securepay-docs.readme.io/docs/getting-started" target="_blank">SecurePay API Docs</a></li>
            <li>{{ 'Craft Commerce Integration: '|t('commerce') }}<a href="https://craftcms.com/docs/commerce/5.x/extend/payment-gateway-types.html" target="_blank">Payment Gateway Types</a></li>
            <li>
                <strong>{{ 'Test Cards:'|t('commerce') }}</strong>
                <ul>
                    <li>{{ 'Visa:'|t('commerce') }} <strong>4111111111111111</strong> {{ 'OR'|t('commerce') }} <strong>4242424242424242</strong></li>
                    <li>{{ 'Mastercard:'|t('commerce') }} <strong>5555555555554444</strong></li>
                    <li>{{ 'AMEX:'|t('commerce') }} <strong>378282246310005</strong></li>
                    <li><a href="https://securepay-docs.readme.io/docs/testing" target="_blank">More Info</a></li>
                </ul>
            </li>
            <li>
                <strong>{{ '3DS2 Testing:'|t('commerce') }}</strong> 
                <ul>
                <li>{{ 'Visa:'|t('commerce') }} <strong>4100000000000100</strong></li>
                <li>{{ 'Mastercard:'|t('commerce') }} <strong>5100000000000107</strong></li>
                <li>{{ 'AMEX:'|t('commerce') }} <strong>3400000000000108</strong></li>
                <li>{{ 'Card Holder Name:'|t('commerce') }} <strong>{{ 'Test Card or an empty value'|t('commerce') }}</strong></li>
                <li>{{ 'Expiry date (YYMM):'|t('commerce') }} <strong>{{ '2508 or an empty value'|t('commerce') }}</strong></li>
                <li><a href="https://securepay-docs.readme.io/docs/3ds2-testing" target="_blank">More Info</a></li>
                </li>
        </ul>
    </div>
</div> 

